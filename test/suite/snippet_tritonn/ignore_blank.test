register normalizers/yamysql
register function/snippet_tritonn

table_create Entries TABLE_NO_KEY
column_create Entries content COLUMN_SCALAR ShortText

table_create Tokens TABLE_PAT_KEY ShortText --default_tokenizer TokenBigramIgnoreBlank --normalizer NormalizerYaMySQLPartofspeechHtml
column_create Tokens entries_content COLUMN_INDEX|WITH_POSITION Entries content

load --table Entries
[
{"content": "テストの終わり"}
]

select Entries \
  --output_columns 'snippet_tritonn(content, 200, 2, \
  "NormalizerYaMySQLPartofspeechHtml", \
  1, 1, "...", "...", \
  "テスト終わり", "<span class=\\"w1\\">", "</span>"), content' \
  --command_version 2 \
  --match_columns 'content' \
  --query "テスト終わり"

select Entries \
  --output_columns 'snippet_tritonn(content, 200, 2, \
  "NormalizerYaMySQLPartofspeechHtml", \
  1, 1, "...", "...", \
  "テストが終わり", "<span class=\\"w1\\">", "</span>"), content' \
  --command_version 2 \
  --match_columns 'content' \
  --query "テストが終わり"
